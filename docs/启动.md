# 权限平台管理后台启动指南

## 1. 环境准备

### 1.1 安装Go环境

确保你的系统已安装Go 1.24.1或更高版本。

```bash
# 检查Go版本
go version
```

### 1.2 初始化项目环境

项目提供了便捷的环境初始化脚本，执行以下命令安装必要的工具：

```bash
make setup
```

此命令将安装以下工具：
- golangci-lint: 代码规范检查
- goimports: 导入包格式化
- wire: 依赖注入

## 2. 配置项目

### 2.1 配置文件

项目的配置文件位于`config/config.yaml`，包含以下主要配置：

- 服务器配置
- adminToken配置
- Session配置

根据你的环境修改相关配置。

### 2.2 启动依赖服务

项目依赖`权限平台`和Redis外部服务，确保先启动`权限平台`及其依赖（已包含Redis），`权限平台`的启动方式详见其启动文档，不再赘述。

## 3. 构建和运行

### 3.1 代码检查和测试

在启动服务前，推荐执行以下命令确保代码质量：

```bash
# 代码格式化
make fmt

# 依赖整理
make tidy

# 代码规范检查
make lint
```

### 3.2 启动服务

在项目根目录下可以通过以下命令启动主服务：

```bash
make run
```

服务成功启动后，你将看到类似以下的输出信息：
《图片待补充》 ![启动成功.png](imgs/make_run.png)

### 3.3 验证服务状态

服务启动后，可以通过以下方式验证服务是否正常运行：

1. 访问健康检查接口：http://localhost:8080/hello

## 4. 常见问题

### 4.1 数据库连接问题

如果遇到数据库连接问题，请检查：
- MySQL服务是否正常运行
- 配置文件中的连接参数是否正确
- MySQL用户权限是否配置正确

### 4.2 服务无法启动

如果服务无法正常启动，请检查：
- 日志文件中的错误信息（位于logs目录）
- 依赖服务是否已正常启动
- 端口是否被占用

## 5. 附录

### 5.1 项目目录结构

```
├── config     # 配置文件
├── docs       # 文档
├── internal   # 内部代码包
├── ioc        # 启动项目需要的依赖注入代码
├── logs       # 日志文件
├── scripts    # 脚本文件
└── main.go    # 可执行文件 
```

### 5.2 重要端口列表

| 服务          | 端口   | 描述           |
|-------------|------|--------------|
| web         | 8080 | 管理后台Web服务端口  |
| Redis       | 6379 | 缓存服务端口       |
| GRPC Server | 9002 | 权限平台GRPC服务端口 |